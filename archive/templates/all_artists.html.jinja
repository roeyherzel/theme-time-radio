{% extends "layout.html.jinja" %}


{% block content %}
  <div class="jumbotron">
    <div class="container text-center">
      <img class="center-block" src="{{ url_for('static', filename='images/cassette.png') }}" alt="" />
      <h1>Artists</h1>
    </div>
  </div>

  <div class="container">
    <div id="allArtistsPlaceholder"></div>
  </div>
{% endblock %}


{% block style %}
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/all_artists.css') }}">
{% endblock %}


{% block script %}
  <script type="text/javascript">

  $(document).ready(function() {
    // nav bar active
    $('ul.nav > li:has(a[href="/artists"])').addClass("active");

    $.getJSON("/api/artists", function(data, status) {
      var groupedArtists = _.groupBy(data, function(artist) { return artist.name[0]});

      getTemplateAjax('all_artists.handlebars', function(template) {
        var context = {artists: groupedArtists};
        $('#allArtistsPlaceholder').html(template(context));

        // TODO: display index only after images are loaded - document.getElementById("myImg").complete
      });
    });
  });
  </script>

{% endblock %}
