{% extends "layout.html.jinja" %}

{% block content %}
  <div class="jumbotron" id="episodeInfo">

    <div class="container">
      <div class="row">
        <div class="col-md-5">
          <ol class="breadcrumb">
            <li><a href="/episodes/season/{{episode.season}}">Season {{episode.season}}</a></li>
            <li class="active">Episode {{episode.id}}</li>
          </ol>
          <h1>{{episode.title}}</h1>
          <p class="aired text-muted">{{episode.aired}}</p>
        </div>

        <div class="col-md-3">
          <blockquote class="text-muted">
            <p>{{episode.description | nl2br}}&hellip;</p>
            <footer>Intro <cite>Bob Dylan</cite></footer>
          </blockquote>
        </div>

        <div class="col-md-4">
          <img class="center-block" src="{{episode.image}}" alt="">
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <nav>
        <ul class="pager">
          {% if prev %}
            <li class="previous"><a href="/episodes/{{prev.id}}"><span class="glyphicon glyphicon-triangle-left"></span></a></li>
          {% else %}
            <li class="previous disabled"><a href="#"><span class="glyphicon glyphicon-triangle-left"></span></a></li>
          {% endif %}

          {% if next %}
            <li class="next"><a href="/episodes/{{next.id}}"><span class="glyphicon glyphicon-triangle-right"></span></a></li>
          {% else %}
            <li class="next disabled"><a href="#"><span class="glyphicon glyphicon-triangle-right"></span></a></li>
          {% endif %}
        </ul>
      </nav>
    </div>

  </div>

  <div class="jumbotron" id="episodePlaylist">
    <div class="container">
      <div class="row">

        <div class="col-md-4">
          <h2 class="page-header">Stream Episodes Songs</h2>
          <div id="spotifyPlayer"></div>
        </div>

        <div class="col-md-4 text-center">
          <h2 class="page-header">Discover Artists</h2>
          <div id="tracklist_artists_placeholder"></div>
        </div>

        <div class="col-md-4 text-center">
          <h2 class="page-header">Play Episode</h2>
          <audio controls src="{{episode.media}}"></audio>
        </div>

      </div>
      <h2 class="page-header">Full Tracklist</h2>
      <div id="tracklist_placeholder" class="text-center"></div>
    </div>
  </div>

{% endblock %}

{% block style %}
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/episode.css') }}">
{% endblock %}

{% block script %}
  <script type="text/javascript">
    var $EPISODE_ID = {{ episode.id|tojson|safe }},
        $EPISODE_TITLE = {{ episode.title|tojson|safe }};
  </script>

  <script type="text/javascript" src="{{ url_for('static', filename='js/episode.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/tracklist.js') }}"></script>

{% endblock %}
